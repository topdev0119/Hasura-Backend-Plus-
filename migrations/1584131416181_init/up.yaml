- args:
    tables:
      - object_relationships:
          - name: user
            using:
              foreign_key_constraint_on: user_id
        table:
          name: refresh_tokens
          schema: private
      - object_relationships:
          - name: user
            using:
              foreign_key_constraint_on: email
          - name: userByUserId
            using:
              foreign_key_constraint_on: user_id
          - name: userByUsername
            using:
              foreign_key_constraint_on: username
        table:
          name: user_accounts
          schema: private
      - array_relationships:
          - name: refresh_tokens
            using:
              foreign_key_constraint_on:
                column: user_id
                table:
                  name: refresh_tokens
                  schema: private
          - name: user_accounts
            using:
              foreign_key_constraint_on:
                column: user_id
                table:
                  name: user_accounts
                  schema: private
        object_relationships:
          - name: user_account
            using:
              manual_configuration:
                column_mapping:
                  username: username
                remote_table:
                  name: user_accounts
                  schema: private
          - name: userAccountByEmail
            using:
              manual_configuration:
                column_mapping:
                  email: email
                remote_table:
                  name: user_accounts
                  schema: private
        table:
          name: users
          schema: public
    version: 2
  type: replace_metadata
